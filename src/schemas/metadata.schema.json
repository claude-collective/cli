{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude-subagents.local/schemas/metadata.schema.json",
  "title": "Skill Metadata",
  "description": "Metadata schema for individual metadata.yaml files (Phase 0B). Identity (name, description) comes from SKILL.md frontmatter. This file contains relationship, catalog, and CLI display data.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "category",
    "author",
    "cli_name",
    "cli_description",
    "usage_guidance"
  ],
  "properties": {
    "category": {
      "$ref": "#/$defs/SkillCategory",
      "description": "Category this skill belongs to (framework, state, styling, etc.)"
    },
    "category_exclusive": {
      "type": "boolean",
      "description": "If true, only one skill from this category can be active. Defaults to true.",
      "default": true
    },
    "author": {
      "type": "string",
      "description": "Author handle with @ prefix (for community contributions and display)",
      "pattern": "^@[a-z][a-z0-9-]*$",
      "examples": ["@vince", "@photoroom"]
    },
    "version": {
      "type": "integer",
      "description": "DEPRECATED: Version now lives in plugin.json. This field is optional for backward compatibility.",
      "minimum": 1,
      "examples": [1, 2, 3]
    },
    "cli_name": {
      "type": "string",
      "description": "Short display name for CLI (combined with author as 'React @vince')",
      "minLength": 1,
      "maxLength": 30,
      "examples": ["React", "Zustand", "TanStack Query"]
    },
    "cli_description": {
      "type": "string",
      "description": "Brief description (5-6 words max) for CLI display",
      "minLength": 1,
      "maxLength": 60,
      "examples": [
        "React component patterns",
        "Lightweight client state",
        "Server state with caching"
      ]
    },
    "usage_guidance": {
      "type": "string",
      "description": "When an AI agent should invoke this skill (decision criteria)",
      "minLength": 10,
      "examples": [
        "Use when building React components, hooks, or following React 19 patterns.",
        "Use when managing global UI state, replacing Context misuse, or handling cross-component state."
      ]
    },
    "requires": {
      "type": "array",
      "description": "Hard dependencies - skill IDs or patterns that must be present",
      "items": {
        "$ref": "#/$defs/SkillReference"
      },
      "uniqueItems": true,
      "examples": [["framework/*"], ["react (@vince)", "vitest (@vince)"]]
    },
    "compatible_with": {
      "type": "array",
      "description": "Soft recommendations - skills this works well with",
      "items": {
        "$ref": "#/$defs/SkillReference"
      },
      "uniqueItems": true,
      "examples": [["react (@vince)", "vue-composition-api (@vince)"]]
    },
    "conflicts_with": {
      "type": "array",
      "description": "Mutual exclusions - skills that cannot coexist with this one",
      "items": {
        "$ref": "#/$defs/SkillReference"
      },
      "uniqueItems": true,
      "examples": [
        ["mobx (@vince)", "redux-toolkit (@vince)", "pinia (@vince)"]
      ]
    },
    "tags": {
      "type": "array",
      "description": "Tags for discoverability in the marketplace",
      "items": {
        "type": "string",
        "minLength": 1,
        "pattern": "^[a-z][a-z0-9-]*$"
      },
      "uniqueItems": true,
      "examples": [["state-management", "hooks", "lightweight"]]
    },
    "requires_setup": {
      "type": "array",
      "description": "Setup skills that must be completed before using this skill. Used by usage skills to link to their setup prerequisites.",
      "items": {
        "$ref": "#/$defs/SkillReference"
      },
      "uniqueItems": true,
      "examples": [["posthog-setup (@vince)"], ["resend-setup (@vince)"]]
    },
    "provides_setup_for": {
      "type": "array",
      "description": "Usage skills that this setup skill provides initial configuration for. Used by setup skills to link to their corresponding usage skills.",
      "items": {
        "$ref": "#/$defs/SkillReference"
      },
      "uniqueItems": true,
      "examples": [
        ["posthog-analytics (@vince)", "posthog-flags (@vince)"],
        ["resend (@vince)"]
      ]
    },
    "content_hash": {
      "type": "string",
      "description": "7-character SHA-256 hash of skill folder content. Auto-generated on compile.",
      "pattern": "^[a-f0-9]{7}$",
      "examples": ["a1b2c3d", "f4e5d6c"]
    },
    "updated": {
      "type": "string",
      "format": "date",
      "description": "Date when skill was last modified. Auto-generated on compile.",
      "examples": ["2026-01-22"]
    },
    "forked_from": {
      "type": "object",
      "description": "Provenance tracking for forked skills (only present on copies in user stacks)",
      "additionalProperties": false,
      "properties": {
        "skill_id": {
          "type": "string",
          "description": "Original skill identifier (e.g., 'react (@vince)')"
        },
        "version": {
          "type": "integer",
          "description": "DEPRECATED: Upstream version at fork time. Optional - content_hash is primary identifier.",
          "minimum": 1
        },
        "content_hash": {
          "type": "string",
          "description": "Content hash at fork time"
        },
        "source": {
          "type": "string",
          "description": "Source repository (for multi-source support)"
        },
        "date": {
          "type": "string",
          "format": "date",
          "description": "Date when forked"
        }
      },
      "required": ["skill_id", "content_hash", "date"]
    }
  },
  "$defs": {
    "SkillCategory": {
      "type": "string",
      "description": "Valid skill category names. Must be one of the allowed values.",
      "enum": [
        "framework",
        "meta-framework",
        "client-state",
        "server-state",
        "styling",
        "testing",
        "mocking",
        "api",
        "database",
        "auth",
        "analytics",
        "observability",
        "email",
        "forms",
        "ui-components",
        "i18n",
        "error-handling",
        "files",
        "file-upload",
        "utilities",
        "tooling",
        "monorepo",
        "mobile-framework",
        "frontend",
        "backend",
        "security",
        "shared",
        "setup",
        "research",
        "performance",
        "ci-cd",
        "flags",
        "accessibility",
        "frontend/realtime",
        "frontend/animation"
      ]
    },
    "SkillReference": {
      "type": "string",
      "description": "Reference to a skill ID (e.g., 'react (@vince)') or pattern (e.g., 'framework/*')",
      "minLength": 1,
      "examples": ["react (@vince)", "hono (@vince)", "framework/*"]
    }
  }
}

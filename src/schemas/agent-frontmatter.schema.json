{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude-collective.local/schemas/agent-frontmatter.schema.json",
  "title": "Agent Frontmatter",
  "description": "YAML frontmatter for compiled agent.md files.",
  "type": "object",
  "required": ["name", "description"],
  "additionalProperties": false,
  "properties": {
    "name": {
      "type": "string",
      "description": "Agent identifier (kebab-case)",
      "pattern": "^[a-z][a-z0-9]*(-[a-z0-9]+)*$",
      "minLength": 1,
      "examples": ["web-developer"]
    },
    "description": {
      "type": "string",
      "description": "Agent purpose (shown in Task tool)",
      "minLength": 1
    },
    "tools": {
      "type": "string",
      "description": "Comma-separated tools available to agent",
      "examples": ["Read, Grep, Glob, Bash, Write, Edit"]
    },
    "disallowedTools": {
      "type": "string",
      "description": "Comma-separated tools agent cannot use"
    },
    "model": {
      "type": "string",
      "description": "AI model to use",
      "enum": ["sonnet", "opus", "haiku", "inherit"],
      "default": "inherit"
    },
    "permissionMode": {
      "type": "string",
      "description": "How agent handles permissions",
      "enum": ["default", "acceptEdits", "dontAsk", "bypassPermissions", "plan", "delegate"],
      "default": "default"
    },
    "skills": {
      "type": "array",
      "description": "Preloaded skill names",
      "items": { "type": "string", "minLength": 1 },
      "uniqueItems": true
    },
    "hooks": {
      "type": "object",
      "description": "Lifecycle hooks keyed by event type",
      "additionalProperties": {
        "type": "array",
        "items": { "$ref": "#/$defs/HookDefinition" }
      }
    }
  },
  "$defs": {
    "HookDefinition": {
      "type": "object",
      "description": "Hook with matcher and actions",
      "properties": {
        "matcher": {
          "type": "string",
          "description": "Tool/event pattern to match"
        },
        "hooks": {
          "type": "array",
          "items": { "$ref": "#/$defs/HookAction" }
        }
      }
    },
    "HookAction": {
      "type": "object",
      "description": "Hook action",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["command", "script", "prompt"]
        },
        "command": { "type": "string" },
        "script": { "type": "string" },
        "prompt": { "type": "string" }
      }
    }
  }
}

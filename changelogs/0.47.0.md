# Release 0.47.0 (2026-02-25)

## Added

- **`domain` field on skill metadata and agent YAML** — Skills and agents can now declare an explicit `domain` in their `metadata.yaml` / `agent.yaml`. Custom domains from sources with `custom: true` are discovered and registered at load time. Agent step uses explicit domain before kebab-prefix inference. (D-49)
- **`validate --source` command** — New `--source` flag validates all skills in a source repository for schema compliance, missing files, snake_case key conventions, cliName/directory consistency, category patterns, and cross-references. (D-42)
- **Build step selection counter** — Dimmed "(X of 1)" for exclusive categories, "(X selected)" for non-exclusive. Hidden in expert mode. (D-53)
- **Domain ordering utility** — `orderDomains()` sorts built-in domains (Web > API > Mobile > CLI) canonically, custom domains alphabetically after. `BUILT_IN_DOMAIN_ORDER` constant in `consts.ts`. (D-54)
- **Domain deselection clears skills** — `toggleDomain` in wizard-store now clears `domainSelections[domain]` when toggling OFF. (D-55)
- 6 methodology skills and 4 categories added to `TEST_SKILLS`/`TEST_CATEGORIES` shared fixtures. (T-09)

## Changed

- **Custom skill IDs accepted in stacks** — `skillAssignmentElementSchema`, `skillMetadataLoaderSchema`, and `localRawMetadataSchema` now use `extensibleSkillIdSchema` instead of strict `skillIdSchema`. Custom marketplace skill IDs are no longer rejected during stacks.yaml validation. (D-46)
- **Custom skill ID discovery unconditional** — `discoverCustomSkillValues` no longer checks `SKILL_ID_PATTERN` before registering skill IDs. All skill IDs from `custom: true` skills are registered unconditionally. (D-46)
- **`extensibleDomainSchema` exported** — Now available for use in external schema definitions. (D-46)

## Fixed

- Custom marketplace skills with non-standard IDs (e.g., `dummy-skill`) were rejected by stacks.yaml validation even when `custom: true` was set.

## Removed

- **`verifyHash` / `verifyContentHash()`** — Removed redundant build-time hash verification from skill-plugin-compiler. The content hash is always recomputed by `determinePluginVersion`, making pre-verification unnecessary. `contentHash` remains as legitimate metadata written to `metadata.yaml`. (D-45)
- **Legacy slash-in-skill-ID code** — Removed 4 dead code paths that handled `/` in skill IDs: `skill-fetcher.ts` findSkillPath slash branch, `plugin-finder.ts` slash split, `compiler.ts` slash replace, `create-test-source.ts` slash replace. Skill IDs are kebab-case only. (D-51)

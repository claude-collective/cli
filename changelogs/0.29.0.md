# Release 0.29.0 (2026-02-15)

## Added

- **Shared utility modules** -- Extracted `errors.ts`, `yaml.ts`, `messages.ts` into `src/cli/utils/` with full test coverage. Centralized metadata keys in `metadata-keys.ts`. Added `readFileSafe()` to `fs.ts` and `log()` to `logger.ts`.
- **Expanded Zod schemas** -- 30+ schemas covering all JSON/YAML parsing boundaries with field-level JSDoc. New `formatZodErrors` helper for user-friendly validation messages.
- **Integration test suites** -- New integration tests for import-skill, init-flow, source-switching, wizard-init-compile pipeline, and skill-resolution. Consolidated test helpers with `SKILL_FIXTURES`, `getTestSkill`, `createTestSource`. Test fixture files under `test/fixtures/`.
- **Documentation** -- `type-conventions.md` (union type rules, ID formats), `clean-code-standards.md` (code quality guidelines), expanded `architecture.md` and `commands.md`.

## Changed

- **Union types documented** -- Added JSDoc field documentation to `DomainSelections`, `CategoryMap`, `CategoryDefinition`, `SubcategorySelections`, `ResolvedSubcategorySkills`, `SkillAssignment`.
- **Library decomposition** -- Decomposed large functions across resolver, agent-recompiler, matrix-resolver, matrix-loader, plugin-validator, plugin-finder, compiler, and versioning modules. Added JSDoc documentation throughout.
- **Command standardization** -- All CLI commands use consistent error handling via `handleError` base method, typed exit codes, and usage examples in descriptions.
- **Wizard refactoring** -- Extracted 11 custom hooks, 3 subcomponents (`domain-selection`, `stack-selection`, `help-modal`), and `build-step-logic` module. Wizard store decomposed into focused action groups.
- **Barrel exports removed** -- Deleted `themes/index.ts` and `common/index.ts` barrel files in favor of direct imports.
- **Consolidated constants** -- `CLI_COLORS`, `STANDARD_FILES`, `STANDARD_DIRS`, `MAX_CONFIG_FILE_SIZE` centralized in `consts.ts`.

## Fixed

- **Path traversal hardening** -- `source-switcher`: `validateSkillId`, `validatePathBoundary`, TOCTOU race fix. `skill-copier`: `validateSkillPath`, `resolveSkillPath` boundary checks.
- **Input validation** -- `config.ts`: `validateSourceFormat`, SSRF prevention, UNC path blocking. `exec.ts`: argument length, format, and control character validation.
- **Template injection** -- Compiler Liquid template sanitization with function decomposition.
- **Source fetcher limits** -- File size limits, nesting depth guards, SHA256 cache keys.

## Removed

- **`validator.ts`** -- Replaced by `schema-validator.ts` and `output-validator.ts`.

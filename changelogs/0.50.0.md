# Release 0.50.0 (2026-02-27)

## Breaking Changes

- **Renamed `agent.yaml` to `metadata.yaml`** — All 17 agent definition files now use `metadata.yaml` instead of `agent.yaml`. The schema, loaders, and `new agent` scaffolding updated accordingly.
- **Removed `cli-migrator` agent** — The migration agent and all its documentation files (intro, workflow, output-format, anti-patterns, conversion-mappings, critical-requirements, critical-reminders) have been deleted.
- **Removed expert mode** — The `expertMode` toggle, its UI plumbing in wizard-layout and wizard store, and the `--expert` flag on init/edit commands have been removed.
- **Removed `ejectTemplates` from project config** — The `ejectTemplates` field and its schema entry have been removed from `ProjectSourceConfig`.

## Added

- **`useSectionScroll` hook** — Extracted from 3 wizard components (category-grid, source-grid, stack-selection) into a shared hook with unit tests. Handles pixel-offset scrolling for variable-height sections.
- **`useRowScroll` hook** — Extracted from 3 wizard components (checkbox-grid, step-agents, step-settings) into a shared hook. Handles row-based scrolling for uniform-height items.
- **Dashboard view on `init` for existing projects** — Running `agentsinc init` on an already-initialized project now shows a dashboard instead of failing.
- **Stack selection scrolling** — Wired `useMeasuredHeight` into `step-stack.tsx` so the stack selection view scrolls correctly on small terminals.
- **Full-width SelectionCard** — Stack selection cards now render at full terminal width.
- **Canonical domain sort order** — Added `sortDomainsCanonically()` helper using `BUILT_IN_DOMAIN_ORDER` to keep domain tabs in a stable order when toggling selections. Added `"shared"` to `BUILT_IN_DOMAIN_ORDER`.
- **`SOURCE_DISPLAY_NAMES` constant** — Consolidated duplicate source display name mappings into `consts.ts`.
- **`loadEffectiveSourceConfig` helper** — Shared config loading logic extracted to `configuration/config.ts`.
- **`formatZodErrors` utility** — Shared Zod error formatting extracted to `logger.ts` with unit tests.

## Changed

- **Unified scroll rendering in all 6 wizard views** — Removed duplicated no-scroll/scroll render branches in category-grid, source-grid, stack-selection, checkbox-grid, step-agents, and step-settings. All now use a single render path with conditional height/overflow/flexShrink.
- **DRY consolidation across production code** — `ConfigWithSource` re-exported from configuration index, `SUBCATEGORY_VALUES_SET` properly typed as `Set<Subcategory>`, `readForkedFromMetadata` delegates to `readLocalSkillMetadata`.
- **Test DRY improvements** — Extracted shared helpers, `await stdin.write` consistency, `it.each` patterns replacing duplicate test cases, mock data consolidated into `mock-data/` directory.
- **E2E test fixes** — Added category to `createEditableProject` metadata, fixed search `it.fails` test.

## Fixed

- **Domain sort order stability (B-07)** — Domains no longer reorder when toggling selections on/off. `toggleDomain`, `populateFromStack`, and `populateFromSkillIds` all apply canonical sort order.

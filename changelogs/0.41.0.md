# Release 0.41.0 (2026-02-19)

## Bug Fixes

- **Fix config.yaml missing stack/agents after init** — `getDefaultsPath()` in `defaults-loader.ts` resolved to the wrong path in dist builds (tsup flattens chunks to `dist/` but the relative `../..` path assumed source layout). Agent-mappings.yaml was silently not loaded, causing all skills to fall back to `DEFAULT_AGENTS`, which were then filtered out by the user's agent selection — resulting in an empty stack.
- **Fix agent-mappings patterns for domain-prefixed subcategories** — D-31 renamed skill paths from `methodology/*` to `meta-methodology-*` but `agent-mappings.yaml` patterns were not updated. Fixed `methodology/*` → `meta-methodology/*`, `reviewing/*` → `meta-reviewing/*`, `research/*` → `meta-research/*`. Also fixed dead specific patterns using slashes (`web/testing` → `web-testing`, `api/testing` → `api-testing`, `web/mocks` → `web-mocking`).
- **Fix wizard storing display names instead of canonical skill IDs** — `populateFromSkillIds()` in wizard-store stored `skill.displayName` (e.g., `"react"`) instead of the canonical `skillId` (e.g., `"web-framework-react"`). This caused downstream config generation to fail skill lookups.
- **Add CLI agents to methodology agent mappings** — `cli-developer`, `cli-reviewer`, `cli-tester`, `cli-migrator` were missing from the `meta-methodology/*` pattern in `agent-mappings.yaml`. Also added developer agents to `meta-reviewing/*`.

## Changed

- **Add `CLI_BIN_NAME` constant** — all user-facing command references now use `CLI_BIN_NAME` from `consts.ts` instead of hardcoded `"agentsinc"` strings (19 replacements across 13 source files)
- **Add diagnostic logging to config generation** — `generateProjectConfigFromSkills()` now logs skill lookup results, agent assignments, and warns when skills are not found in the matrix or all agents are filtered out

## Files Changed

### Bug Fixes

- `src/cli/lib/loading/defaults-loader.ts` — `getDefaultsPath()` uses `isInDist` check for dist builds
- `src/cli/defaults/agent-mappings.yaml` — domain-prefixed patterns, CLI agents added, dead slash patterns fixed
- `src/cli/stores/wizard-store.ts` — store `skillId` instead of `displayName`, remove `!skill.displayName` guard
- `src/cli/lib/configuration/config-generator.ts` — diagnostic verbose/warn logging
- `src/cli/lib/installation/local-installer.ts` — diagnostic verbose logging

### CLI_BIN_NAME

- `src/cli/consts.ts` — new `CLI_BIN_NAME` constant
- 12 command files + `utils/messages.ts` + `lib/installation/installation.ts` + `lib/skills/skill-fetcher.ts`

### Tests

- `src/cli/lib/__tests__/commands/edit.test.ts` — assertions updated for canonical skill IDs
- `src/cli/lib/configuration/config-generator.test.ts` — fixture path and assertions updated
